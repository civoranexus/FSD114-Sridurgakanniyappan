<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>EduVillage – Course Player</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- CSS -->
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="style.css">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>

<body>

    <!-- HEADER -->
    <header class="header">
        <button id="menuBtn" class="menu-btn">☰</button>

        <div class="logo-container">
            <img src="Long_logo.png" alt="Civora Nexus Logo">
            <div>
                <h1>EduVillage</h1>
                <small style="font-size: 0.8rem; opacity: 0.9;">by Civora Nexus</small>
            </div>
        </div>

        <div class="profile">
            <img src="https://i.pravatar.cc/40" alt="Profile">
            <span>Hello, Student</span>
        </div>
    </header>

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <nav>
            <a href="student-dashboard.html">Dashboard</a>
            <a href="mycourses.html">My Courses</a>
            <a href="assignments.html">Assignments</a>
            <a href="quiz.html">Quizzes</a>
            <a href="certificates.html">Certificates</a>
            <a href="messages.html">Messages</a>
            <a href="settings.html">Settings</a>
            <a href="login.html" id="logoutBtn">Logout</a>
        </nav>
    </aside>

    <!-- MAIN CONTENT -->
    <main id="mainContent" class="main">
        <div id="playerContainer" class="course-player-container">
            <!-- Filled by JS -->
            <p>Loading Course...</p>
        </div>
    </main>

    <!-- JS -->
    <script>
        // Embedded simple player logic to avoid complex dependencies
        const courseData = {
            'web-development-basics': {
                title: 'Web Development Basics',
                modules: [
                    { id: 1, title: 'Introduction to HTML', videoUrl: 'https://www.youtube.com/embed/qz0aGYrrlhU', notes: 'HTML stands for HyperText Markup Language.' },
                    { id: 2, title: 'CSS Styling Basics', videoUrl: 'https://www.youtube.com/embed/1Rs2ND1ryYc', notes: 'Cascading Style Sheets (CSS) is a style sheet language.' },
                    { id: 3, title: 'JavaScript Essentials', videoUrl: 'https://www.youtube.com/embed/W6NZfCO5SIk', notes: 'JavaScript is a programming language for the web.' }
                ]
            },
            'react-fundamentals': {
                title: 'React Fundamentals',
                modules: [
                    { id: 1, title: 'React Components', videoUrl: 'https://www.youtube.com/embed/Y2hgEGPzTZY', notes: 'Components are independent and reusable bits of code.' },
                    { id: 2, title: 'State and Props', videoUrl: 'https://www.youtube.com/embed/4ORZ1GmjaMc', notes: 'State contains data specific to a component.' }
                ]
            },
            'full-stack-dev': {
                title: 'Full Stack Development',
                modules: [
                    { id: 1, title: 'Front-end Basics', videoUrl: 'https://www.youtube.com/embed/qz0aGYrrlhU', notes: 'HTML/CSS/JS basics' },
                    { id: 2, title: 'Back-end Basics', videoUrl: 'https://www.youtube.com/embed/W6NZfCO5SIk', notes: 'Node.js + Express basics' }
                ]
            }
        };

        let currentCourseId = new URLSearchParams(window.location.search).get('course') || 'web-development-basics';
        let currentLessonIndex = 0;

        function renderPlayer() {
            const course = courseData[currentCourseId];
            if (!course) {
                document.getElementById('playerContainer').innerHTML = '<p>Course not found.</p>';
                return;
            }

            const modulesHtml = course.modules.map((m, i) => `
            <li class="module-item ${i === currentLessonIndex ? 'active' : ''}" onclick="changeLesson(${i})">
                <span>${i < currentLessonIndex ? '✔' : (i === currentLessonIndex ? '▶' : '○')}</span>
                ${m.title}
            </li>
        `).join('');

            const lesson = course.modules[currentLessonIndex];
            const isLast = currentLessonIndex === course.modules.length - 1;

            document.getElementById('playerContainer').innerHTML = `
             <div class="player-sidebar">
                <h3>${course.title}</h3>
                <ul class="module-list">${modulesHtml}</ul>
                <button class="btn-back" onclick="window.location.href='mycourses.html'">← Back to Courses</button>
              </div>
              <div class="player-content">
                <div class="video-wrapper">
                    <iframe src="${lesson.videoUrl}" frameborder="0" allowfullscreen></iframe>
                </div>
                <div class="lesson-controls">
                     <div class="lesson-info">
                        <h2>Lesson ${currentLessonIndex + 1}: ${lesson.title}</h2>
                     </div>
                </div>
                <div class="lesson-notes">
                    <h4>Notes:</h4>
                    <p>${lesson.notes}</p>
                </div>
                <div style="margin-top: 20px; display: flex; justify-content: space-between;">
                    <button onclick="prevLesson()" ${currentLessonIndex === 0 ? 'disabled' : ''}>Previous</button>
                    <button onclick="nextLesson()">${isLast ? 'Finish' : 'Next Lesson'}</button>
                </div>
                 <div style="margin-top: 20px; text-align: right;">
                    <button style="background: var(--accent-light); color: #000;" onclick="window.location.href='assignments.html'">View Assignments</button>
                     <button style="background: var(--accent-light); color: #000;" onclick="window.location.href='quiz.html?course=${currentCourseId}'">Take Quiz</button>
                </div>
              </div>
        `;
        }

        function changeLesson(i) {
            currentLessonIndex = i;
            renderPlayer();
        }

        function nextLesson() {
            const course = courseData[currentCourseId];
            if (currentLessonIndex < course.modules.length - 1) {
                currentLessonIndex++;
                renderPlayer();
            } else {
                alert("Course Completed! Redirecting to Quiz...");
                window.location.href = `quiz.html?course=${currentCourseId}`;
            }
        }

        function prevLesson() {
            if (currentLessonIndex > 0) {
                currentLessonIndex--;
                renderPlayer();
            }
        }

        // Menu toggle logic
        document.getElementById("menuBtn")?.addEventListener("click", () => {
            document.querySelector(".sidebar").classList.toggle("show");
        });

        // Init
        renderPlayer();

    </script>

</body>

</html>